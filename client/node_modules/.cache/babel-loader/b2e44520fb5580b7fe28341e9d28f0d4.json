{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\xerographics\\\\client\\\\src\\\\components\\\\Login\\\\Login.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport Alert from \"../alerts/alert\";\nimport LinearProgressLoad from \"../alerts/LinearProgress\";\nimport api from \"../../api/api\";\nimport { useCookies } from 'react-cookie';\nimport { useNavigate } from \"react-router-dom\";\nimport TopBar from \"../incl/TopBar\";\nimport Dashboard from \"../dashboard/Dashboard\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Login(props) {\n  _s();\n\n  const navigate = useNavigate();\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [open, setOpen] = useState(false);\n  const [alertType, setAlertType] = useState(\"\");\n  const [alertMessage, setAlertMessage] = useState(\"\");\n  const [loadingProgress, setLoadingProgress] = useState(false);\n\n  const handleAlertClose = () => {\n    setOpen(false);\n    setAlertMessage('');\n    setAlertType('');\n  };\n\n  const loginUser = e => {\n    // console.log(\"sjsjs\")\n    e.preventDefault();\n\n    if (email === \"\" || password === \"\") {\n      setOpen(true);\n      setAlertMessage('All fields are mandatory!');\n      setAlertType('error');\n    } else {\n      setLoadingProgress(true);\n      const state = {\n        email: email,\n        password: password\n      };\n      LoginHandler(state);\n      setEmail(''); // clear form fields\n\n      setPassword(''); // clear form fields\n    }\n  };\n\n  const LoginHandler = state => {\n    api.post('auth/login', state, {\n      headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json'\n      }\n    }).then(function (response) {\n      setLoadingProgress(false);\n      console.log(response.data);\n\n      if (response.data.error === false) {\n        // console.log(response.data.users)\n        // return response.data.users;\n        setAlertType('success');\n        setAlertMessage(response.data.message);\n        setOpen(true);\n        sessionStorage.setItem(\"jwt_token\", response.data.access_token);\n        sessionStorage.setItem(\"status\", true); // navigate('/')\n\n        setTimeout(() => {\n          window.location = \"/\";\n        }, 300);\n      } else {\n        // console.log(response.data.message)\n        // return [];\n        setAlertType('error');\n        setAlertMessage(response.data.message);\n        setOpen(true);\n      }\n    }).catch(function (error) {\n      sessionStorage.setItem(\"status\", false);\n\n      if (error.response.status === 401) {\n        setLoadingProgress(false);\n        setAlertType('error');\n        setAlertMessage(\"Error 401: wrong username or password\");\n        setOpen(true);\n      } else {\n        setLoadingProgress(false);\n        setAlertType('error');\n        setAlertMessage(\"Error 500: Internal server error\");\n        setOpen(true);\n        sessionStorage.setItem(\"status\", false);\n      }\n    });\n  };\n\n  const loading = () => {\n    if (loadingProgress) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-3\",\n        children: /*#__PURE__*/_jsxDEV(LinearProgressLoad, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 17\n      }, this);\n    }\n  };\n\n  useEffect(() => {\n    if (sessionStorage.getItem(\"jwt_token\") !== null) {\n      //check if it exists\n      navigate('/');\n      return /*#__PURE__*/_jsxDEV(Dashboard, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 17\n      }, this);\n    }\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header bg-gradient-success py-6 py-lg-7 pt-lg-8\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"container\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"header-body text-center mb-5\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"row justify-content-center\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-xl-5 col-lg-6 col-md-8 px-5\",\n                children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                  className: \"text-white\",\n                  children: \"Welcome!\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 133,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-lead text-white\",\n                  children: \"Login here to access your account\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 134,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 132,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 131,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container mt--8 pb-5\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row justify-content-center\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-lg-5 col-md-7\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card bg-secondary border-0 mb-0\",\n              children: [loading(), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"card-body px-lg-5 py-lg-5\",\n                children: /*#__PURE__*/_jsxDEV(\"form\", {\n                  onSubmit: loginUser,\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"form-group mb-3\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"input-group input-group-merge input-group-alternative\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"input-group-prepend\",\n                        children: /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"input-group-text\",\n                          children: /*#__PURE__*/_jsxDEV(\"i\", {\n                            className: \"ni ni-email-83\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 153,\n                            columnNumber: 88\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 153,\n                          columnNumber: 53\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 152,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                        value: email,\n                        onChange: e => setEmail(e.target.value),\n                        className: \"form-control \",\n                        placeholder: \"Email\",\n                        name: \"email\",\n                        type: \"email\",\n                        required: true,\n                        autoComplete: \"email\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 156,\n                        columnNumber: 49\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 151,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 150,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"form-group\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"input-group input-group-merge input-group-alternative\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"input-group-prepend\",\n                        children: /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"input-group-text\",\n                          children: /*#__PURE__*/_jsxDEV(\"i\", {\n                            className: \"ni ni-lock-circle-open\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 167,\n                            columnNumber: 88\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 167,\n                          columnNumber: 53\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 166,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                        value: password,\n                        onChange: e => setPassword(e.target.value),\n                        type: \"password\",\n                        className: \"form-control\",\n                        placeholder: \"Password\",\n                        type: \"password\",\n                        required: true,\n                        autoComplete: \"current-password\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 170,\n                        columnNumber: 49\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 165,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 164,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"custom-control custom-control-alternative custom-checkbox\",\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      className: \"custom-control-input\",\n                      id: \" customCheckLogin\",\n                      type: \"checkbox\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 180,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                      className: \"custom-control-label\",\n                      htmlFor: \" customCheckLogin\",\n                      children: /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"text-muted\",\n                        children: \"Remember me\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 183,\n                        columnNumber: 49\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 182,\n                      columnNumber: 45\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 179,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-center\",\n                    children: /*#__PURE__*/_jsxDEV(\"button\", {\n                      type: \"submit\",\n                      className: \"btn btn-primary my-2\",\n                      children: \"Sign in\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 187,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 186,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 148,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 146,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"row mt-2\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-6\",\n                children: /*#__PURE__*/_jsxDEV(\"a\", {\n                  className: \"\",\n                  href: \"#\",\n                  children: /*#__PURE__*/_jsxDEV(\"small\", {\n                    children: \"Forgot Your Password?\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 195,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 194,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 193,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 192,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Alert, {\n      openAlert: open,\n      alertMessage: alertMessage,\n      alertType: alertType,\n      handleAlertClose: handleAlertClose\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 126,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Login, \"jWptjebJ1MvGWQhIkXzIWDAOsT0=\", false, function () {\n  return [useNavigate];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["C:/xampp/htdocs/xerographics/client/src/components/Login/Login.js"],"names":["React","useEffect","useState","Alert","LinearProgressLoad","api","useCookies","useNavigate","TopBar","Dashboard","Login","props","navigate","email","setEmail","password","setPassword","open","setOpen","alertType","setAlertType","alertMessage","setAlertMessage","loadingProgress","setLoadingProgress","handleAlertClose","loginUser","e","preventDefault","state","LoginHandler","post","headers","then","response","console","log","data","error","message","sessionStorage","setItem","access_token","setTimeout","window","location","catch","status","loading","getItem","target","value"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport Alert from \"../alerts/alert\";\r\nimport LinearProgressLoad from \"../alerts/LinearProgress\";\r\nimport api from \"../../api/api\";\r\nimport {useCookies} from 'react-cookie';\r\nimport {useNavigate} from \"react-router-dom\";\r\nimport TopBar from \"../incl/TopBar\";\r\nimport Dashboard from \"../dashboard/Dashboard\";\r\n\r\n\r\nfunction Login(props) {\r\n    const navigate = useNavigate();\r\n\r\n    const [email, setEmail] = useState('')\r\n    const [password, setPassword] = useState('')\r\n    const [open, setOpen] = useState(false);\r\n    const [alertType, setAlertType] = useState(\"\");\r\n    const [alertMessage, setAlertMessage] = useState(\"\");\r\n    const [loadingProgress, setLoadingProgress] = useState(false);\r\n\r\n\r\n    const handleAlertClose = () => {\r\n        setOpen(false);\r\n        setAlertMessage('')\r\n        setAlertType('')\r\n    };\r\n\r\n    const loginUser = (e) => {\r\n        // console.log(\"sjsjs\")\r\n        e.preventDefault()\r\n        if (email === \"\" || password === \"\") {\r\n            setOpen(true);\r\n            setAlertMessage('All fields are mandatory!')\r\n            setAlertType('error')\r\n        } else {\r\n            setLoadingProgress(true)\r\n            const state = {\r\n                email: email,\r\n                password: password\r\n            }\r\n            LoginHandler(state)\r\n            setEmail('') // clear form fields\r\n            setPassword('') // clear form fields\r\n\r\n        }\r\n    }\r\n    const LoginHandler = (state) => {\r\n\r\n        api.post('auth/login'\r\n            , state, {\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'Accept': 'application/json',\r\n\r\n                }\r\n            }\r\n        )\r\n            .then(function (response) {\r\n                setLoadingProgress(false)\r\n                console.log(response.data)\r\n                if (response.data.error === false) {\r\n\r\n                    // console.log(response.data.users)\r\n                    // return response.data.users;\r\n                    setAlertType('success')\r\n                    setAlertMessage(response.data.message)\r\n                    setOpen(true)\r\n                    sessionStorage.setItem(\"jwt_token\", response.data.access_token);\r\n                    sessionStorage.setItem(\"status\", true);\r\n                    // navigate('/')\r\n                    setTimeout(() => {\r\n                        window.location = \"/\";\r\n                    }, 300)\r\n\r\n\r\n                } else {\r\n                    // console.log(response.data.message)\r\n                    // return [];\r\n                    setAlertType('error')\r\n                    setAlertMessage(response.data.message)\r\n                    setOpen(true)\r\n\r\n                }\r\n\r\n            })\r\n            .catch(function (error) {\r\n                sessionStorage.setItem(\"status\", false);\r\n                if (error.response.status === 401) {\r\n                    setLoadingProgress(false)\r\n                    setAlertType('error')\r\n                    setAlertMessage(\"Error 401: wrong username or password\")\r\n                    setOpen(true)\r\n\r\n\r\n                } else {\r\n                    setLoadingProgress(false)\r\n                    setAlertType('error')\r\n                    setAlertMessage(\"Error 500: Internal server error\")\r\n                    setOpen(true)\r\n                    sessionStorage.setItem(\"status\", false);\r\n                }\r\n            });\r\n    }\r\n    const loading = () => {\r\n        if (loadingProgress) {\r\n            return (\r\n                <div className=\"mb-3\">\r\n                    <LinearProgressLoad/>\r\n                </div>\r\n            )\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (sessionStorage.getItem(\"jwt_token\") !== null) {\r\n            //check if it exists\r\n            navigate('/')\r\n            return (\r\n                <Dashboard/>\r\n            )\r\n        }\r\n    }, [])\r\n\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"\">\r\n                <div className=\"header bg-gradient-success py-6 py-lg-7 pt-lg-8\">\r\n                    <div className=\"container\">\r\n                        <div className=\"header-body text-center mb-5\">\r\n                            <div className=\"row justify-content-center\">\r\n                                <div className=\"col-xl-5 col-lg-6 col-md-8 px-5\">\r\n                                    <h1 className=\"text-white\">Welcome!</h1>\r\n                                    <p className=\"text-lead text-white\">Login here to access your account</p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n                <div className=\"container mt--8 pb-5\">\r\n                    <div className=\"row justify-content-center\">\r\n                        <div className=\"col-lg-5 col-md-7\">\r\n                            <div className=\"card bg-secondary border-0 mb-0\">\r\n                                {loading()}\r\n                                <div className=\"card-body px-lg-5 py-lg-5\">\r\n\r\n                                    <form onSubmit={loginUser}>\r\n\r\n                                        <div className=\"form-group mb-3\">\r\n                                            <div className=\"input-group input-group-merge input-group-alternative\">\r\n                                                <div className=\"input-group-prepend\">\r\n                                                    <span className=\"input-group-text\"><i\r\n                                                        className=\"ni ni-email-83\"></i></span>\r\n                                                </div>\r\n                                                <input value={email} onChange={(e) => setEmail(e.target.value)}\r\n                                                       className=\"form-control \"\r\n                                                       placeholder=\"Email\"\r\n                                                       name=\"email\" type=\"email\" required autoComplete=\"email\"\r\n                                                />\r\n\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"form-group\">\r\n                                            <div className=\"input-group input-group-merge input-group-alternative\">\r\n                                                <div className=\"input-group-prepend\">\r\n                                                    <span className=\"input-group-text\"><i\r\n                                                        className=\"ni ni-lock-circle-open\"></i></span>\r\n                                                </div>\r\n                                                <input value={password} onChange={(e) => setPassword(e.target.value)}\r\n                                                       type=\"password\"\r\n                                                       className=\"form-control\"\r\n                                                       placeholder=\"Password\" type=\"password\" required\r\n                                                       autoComplete=\"current-password\"/>\r\n\r\n\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"custom-control custom-control-alternative custom-checkbox\">\r\n                                            <input className=\"custom-control-input\" id=\" customCheckLogin\"\r\n                                                   type=\"checkbox\"/>\r\n                                            <label className=\"custom-control-label\" htmlFor=\" customCheckLogin\">\r\n                                                <span className=\"text-muted\">Remember me</span>\r\n                                            </label>\r\n                                        </div>\r\n                                        <div className=\"text-center\">\r\n                                            <button type=\"submit\" className=\"btn btn-primary my-2\">Sign in</button>\r\n                                        </div>\r\n                                    </form>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"row mt-2\">\r\n                                <div className=\"col-6\">\r\n                                    <a className=\"\" href=\"#\">\r\n                                        <small>Forgot Your Password?</small>\r\n                                    </a>\r\n                                </div>\r\n\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <Alert openAlert={open} alertMessage={alertMessage} alertType={alertType}\r\n                   handleAlertClose={handleAlertClose}/>\r\n\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}