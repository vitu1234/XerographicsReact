{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\xerographics\\\\client\\\\src\\\\components\\\\Login\\\\Login.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport Alert from \"../alerts/alert\";\nimport LinearProgressLoad from \"../alerts/LinearProgress\";\nimport api from \"../../api/api\";\nimport { useCookies } from 'react-cookie';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Login(props) {\n  _s();\n\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [open, setOpen] = useState(false);\n  const [alertType, setAlertType] = useState(\"\");\n  const [alertMessage, setAlertMessage] = useState(\"\");\n  const [loadingProgress, setLoadingProgress] = useState(false);\n  const [cookies, setCookie] = useCookies(['jwt']);\n\n  const handleAlertClose = () => {\n    setOpen(false);\n    setAlertMessage('');\n    setAlertType('');\n  };\n\n  const loginUser = e => {\n    // console.log(\"sjsjs\")\n    e.preventDefault();\n\n    if (email === \"\" || password === \"\") {\n      setOpen(true);\n      setAlertMessage('All fields are mandatory!');\n      setAlertType('error');\n    } else {\n      setLoadingProgress(true);\n      const state = {\n        email: email,\n        password: password\n      };\n      LoginHandler(state);\n      setEmail(''); // clear form fields\n\n      setPassword(''); // clear form fields\n    }\n  };\n\n  const LoginHandler = state => {\n    console.log(state);\n    api.post('api/auth/login', state, {\n      headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json'\n      },\n      credentials: 'include'\n    }).then(function (response) {\n      setLoadingProgress(false);\n      console.log(response.data);\n\n      if (response.data.error === false) {\n        // console.log(response.data.users)\n        // return response.data.users;\n        setAlertType('success');\n        setAlertMessage(response.data.message);\n        setOpen(true);\n        props.setLoginStatus(true); // setCookie('jwt_token', response.data.access_token, {path: '/'});\n\n        window.sessionStorage.setItem(\"jwt_token\", response.data.access_token); // setTimeout(() => { navigate('/dashboard'); }, 1000)\n      } else {\n        // console.log(response.data.message)\n        // return [];\n        setAlertType('error');\n        setAlertMessage(response.data.message);\n        setOpen(true);\n      }\n    }).catch(function (error) {\n      if (error.response.status === 401) {\n        setLoadingProgress(false);\n        console.log(error);\n        setAlertType('error');\n        setAlertMessage(\"Error 401: wrong username or password\");\n        setOpen(true);\n        props.setLoginStatus(false);\n      } else {\n        setLoadingProgress(false);\n        console.log(error);\n        setAlertType('error');\n        setAlertMessage(\"Error 500: Internal server error\");\n        setOpen(true);\n        props.setLoginStatus(false);\n      }\n    });\n  };\n\n  const loading = () => {\n    if (loadingProgress) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-3\",\n        children: /*#__PURE__*/_jsxDEV(LinearProgressLoad, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 17\n      }, this);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header bg-gradient-success py-6 py-lg-7 pt-lg-8\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"container\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"header-body text-center mb-5\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"row justify-content-center\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-xl-5 col-lg-6 col-md-8 px-5\",\n                children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                  className: \"text-white\",\n                  children: \"Welcome!\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 118,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-lead text-white\",\n                  children: \"Login here to access your account\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 119,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 117,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container mt--8 pb-5\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row justify-content-center\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-lg-5 col-md-7\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card bg-secondary border-0 mb-0\",\n              children: [loading(), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"card-body px-lg-5 py-lg-5\",\n                children: /*#__PURE__*/_jsxDEV(\"form\", {\n                  onSubmit: loginUser,\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"form-group mb-3\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"input-group input-group-merge input-group-alternative\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"input-group-prepend\",\n                        children: /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"input-group-text\",\n                          children: /*#__PURE__*/_jsxDEV(\"i\", {\n                            className: \"ni ni-email-83\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 138,\n                            columnNumber: 88\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 138,\n                          columnNumber: 53\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 137,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                        value: email,\n                        onChange: e => setEmail(e.target.value),\n                        className: \"form-control \",\n                        placeholder: \"Email\",\n                        name: \"email\",\n                        type: \"email\",\n                        required: true,\n                        autoComplete: \"email\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 141,\n                        columnNumber: 49\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 136,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 135,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"form-group\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"input-group input-group-merge input-group-alternative\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"input-group-prepend\",\n                        children: /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"input-group-text\",\n                          children: /*#__PURE__*/_jsxDEV(\"i\", {\n                            className: \"ni ni-lock-circle-open\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 152,\n                            columnNumber: 88\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 152,\n                          columnNumber: 53\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 151,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                        value: password,\n                        onChange: e => setPassword(e.target.value),\n                        type: \"password\",\n                        className: \"form-control\",\n                        placeholder: \"Password\",\n                        type: \"password\",\n                        required: true,\n                        autoComplete: \"current-password\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 155,\n                        columnNumber: 49\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 150,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 149,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"custom-control custom-control-alternative custom-checkbox\",\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      className: \"custom-control-input\",\n                      id: \" customCheckLogin\",\n                      type: \"checkbox\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 165,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                      className: \"custom-control-label\",\n                      htmlFor: \" customCheckLogin\",\n                      children: /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"text-muted\",\n                        children: \"Remember me\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 168,\n                        columnNumber: 49\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 167,\n                      columnNumber: 45\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 164,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-center\",\n                    children: /*#__PURE__*/_jsxDEV(\"button\", {\n                      type: \"submit\",\n                      className: \"btn btn-primary my-2\",\n                      children: \"Sign in\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 172,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 171,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 133,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 131,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 129,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"row mt-2\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-6\",\n                children: /*#__PURE__*/_jsxDEV(\"a\", {\n                  className: \"\",\n                  href: \"#\",\n                  children: /*#__PURE__*/_jsxDEV(\"small\", {\n                    children: \"Forgot Your Password?\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 180,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 179,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 178,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 177,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Alert, {\n      openAlert: open,\n      alertMessage: alertMessage,\n      alertType: alertType,\n      handleAlertClose: handleAlertClose\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 111,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Login, \"U8puKRAuMjOmSq7/Gr6TjIMj+wE=\", false, function () {\n  return [useCookies];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["C:/xampp/htdocs/xerographics/client/src/components/Login/Login.js"],"names":["React","useState","Alert","LinearProgressLoad","api","useCookies","Login","props","email","setEmail","password","setPassword","open","setOpen","alertType","setAlertType","alertMessage","setAlertMessage","loadingProgress","setLoadingProgress","cookies","setCookie","handleAlertClose","loginUser","e","preventDefault","state","LoginHandler","console","log","post","headers","credentials","then","response","data","error","message","setLoginStatus","window","sessionStorage","setItem","access_token","catch","status","loading","target","value"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\r\nimport Alert from \"../alerts/alert\";\r\nimport LinearProgressLoad from \"../alerts/LinearProgress\";\r\nimport api from \"../../api/api\";\r\nimport {useCookies} from 'react-cookie';\r\n\r\n\r\nfunction Login(props) {\r\n    const [email, setEmail] = useState('')\r\n    const [password, setPassword] = useState('')\r\n    const [open, setOpen] = useState(false);\r\n    const [alertType, setAlertType] = useState(\"\");\r\n    const [alertMessage, setAlertMessage] = useState(\"\");\r\n    const [loadingProgress, setLoadingProgress] = useState(false);\r\n    const [cookies, setCookie] = useCookies(['jwt']);\r\n\r\n\r\n    const handleAlertClose = () => {\r\n        setOpen(false);\r\n        setAlertMessage('')\r\n        setAlertType('')\r\n    };\r\n\r\n    const loginUser = (e) => {\r\n        // console.log(\"sjsjs\")\r\n        e.preventDefault()\r\n        if (email === \"\" || password === \"\") {\r\n            setOpen(true);\r\n            setAlertMessage('All fields are mandatory!')\r\n            setAlertType('error')\r\n        } else {\r\n            setLoadingProgress(true)\r\n            const state = {\r\n                email: email,\r\n                password: password\r\n            }\r\n            LoginHandler(state)\r\n            setEmail('') // clear form fields\r\n            setPassword('') // clear form fields\r\n\r\n        }\r\n    }\r\n    const LoginHandler = (state) => {\r\n        console.log(state)\r\n\r\n        api.post('api/auth/login'\r\n            , state, {\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'Accept': 'application/json',\r\n\r\n                }, credentials: 'include'\r\n            }\r\n        )\r\n            .then(function (response) {\r\n                setLoadingProgress(false)\r\n                console.log(response.data)\r\n                if (response.data.error === false) {\r\n\r\n                    // console.log(response.data.users)\r\n                    // return response.data.users;\r\n                    setAlertType('success')\r\n                    setAlertMessage(response.data.message)\r\n                    setOpen(true)\r\n                    props.setLoginStatus(true)\r\n                    // setCookie('jwt_token', response.data.access_token, {path: '/'});\r\n                    window.sessionStorage.setItem(\"jwt_token\", response.data.access_token);\r\n\r\n                    // setTimeout(() => { navigate('/dashboard'); }, 1000)\r\n\r\n                } else {\r\n                    // console.log(response.data.message)\r\n                    // return [];\r\n                    setAlertType('error')\r\n                    setAlertMessage(response.data.message)\r\n                    setOpen(true)\r\n                }\r\n\r\n            })\r\n            .catch(function (error) {\r\n\r\n                if (error.response.status === 401) {\r\n                    setLoadingProgress(false)\r\n                    console.log(error);\r\n                    setAlertType('error')\r\n                    setAlertMessage(\"Error 401: wrong username or password\")\r\n                    setOpen(true)\r\n\r\n                    props.setLoginStatus(false)\r\n                } else {\r\n                    setLoadingProgress(false)\r\n                    console.log(error);\r\n                    setAlertType('error')\r\n                    setAlertMessage(\"Error 500: Internal server error\")\r\n                    setOpen(true)\r\n                    props.setLoginStatus(false)\r\n                }\r\n            });\r\n    }\r\n    const loading = () => {\r\n        if (loadingProgress) {\r\n            return (\r\n                <div className=\"mb-3\">\r\n                    <LinearProgressLoad/>\r\n                </div>\r\n            )\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"\">\r\n                <div className=\"header bg-gradient-success py-6 py-lg-7 pt-lg-8\">\r\n                    <div className=\"container\">\r\n                        <div className=\"header-body text-center mb-5\">\r\n                            <div className=\"row justify-content-center\">\r\n                                <div className=\"col-xl-5 col-lg-6 col-md-8 px-5\">\r\n                                    <h1 className=\"text-white\">Welcome!</h1>\r\n                                    <p className=\"text-lead text-white\">Login here to access your account</p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n                <div className=\"container mt--8 pb-5\">\r\n                    <div className=\"row justify-content-center\">\r\n                        <div className=\"col-lg-5 col-md-7\">\r\n                            <div className=\"card bg-secondary border-0 mb-0\">\r\n                                {loading()}\r\n                                <div className=\"card-body px-lg-5 py-lg-5\">\r\n\r\n                                    <form onSubmit={loginUser}>\r\n\r\n                                        <div className=\"form-group mb-3\">\r\n                                            <div className=\"input-group input-group-merge input-group-alternative\">\r\n                                                <div className=\"input-group-prepend\">\r\n                                                    <span className=\"input-group-text\"><i\r\n                                                        className=\"ni ni-email-83\"></i></span>\r\n                                                </div>\r\n                                                <input value={email} onChange={(e) => setEmail(e.target.value)}\r\n                                                       className=\"form-control \"\r\n                                                       placeholder=\"Email\"\r\n                                                       name=\"email\" type=\"email\" required autoComplete=\"email\"\r\n                                                />\r\n\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"form-group\">\r\n                                            <div className=\"input-group input-group-merge input-group-alternative\">\r\n                                                <div className=\"input-group-prepend\">\r\n                                                    <span className=\"input-group-text\"><i\r\n                                                        className=\"ni ni-lock-circle-open\"></i></span>\r\n                                                </div>\r\n                                                <input value={password} onChange={(e) => setPassword(e.target.value)}\r\n                                                       type=\"password\"\r\n                                                       className=\"form-control\"\r\n                                                       placeholder=\"Password\" type=\"password\" required\r\n                                                       autoComplete=\"current-password\"/>\r\n\r\n\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"custom-control custom-control-alternative custom-checkbox\">\r\n                                            <input className=\"custom-control-input\" id=\" customCheckLogin\"\r\n                                                   type=\"checkbox\"/>\r\n                                            <label className=\"custom-control-label\" htmlFor=\" customCheckLogin\">\r\n                                                <span className=\"text-muted\">Remember me</span>\r\n                                            </label>\r\n                                        </div>\r\n                                        <div className=\"text-center\">\r\n                                            <button type=\"submit\" className=\"btn btn-primary my-2\">Sign in</button>\r\n                                        </div>\r\n                                    </form>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"row mt-2\">\r\n                                <div className=\"col-6\">\r\n                                    <a className=\"\" href=\"#\">\r\n                                        <small>Forgot Your Password?</small>\r\n                                    </a>\r\n                                </div>\r\n\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <Alert openAlert={open} alertMessage={alertMessage} alertType={alertType}\r\n                   handleAlertClose={handleAlertClose}/>\r\n\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}